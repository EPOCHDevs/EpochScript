---
title: Data Sources
description: Access market data, fundamentals, economic indicators, and institutional data
icon: Database
---

# Data Sources

EpochScript connects to diverse data sources for building quantitative strategies. Access market prices, fundamental metrics, economic indicators, and institutional trading activity.

## Market Data

### Price and Volume

**`market_data_source`** - Core OHLCV bar data. Requires `timeframe` or `session` parameter to define the bar interval.

**Per-asset execution:** Scripts run once per asset. Universe is configured externally, not in code.

❌ Wrong: `market_data_source(timeframe="1D", symbols=["AAPL", "MSFT"])`
✅ Correct: `market_data_source(timeframe="1D")()`

Error `Unknown option 'symbols'` - No `symbols` parameter; framework iterates assets for you.

**`vwap`, `trade_count`** - Supplemental bar-level metrics for execution analysis and liquidity measurement.

### Indices and Benchmarks

**`common_indices`, `indices`** - Market indices for regime detection and correlation analysis.

**`us_reference_stocks`** - Reference securities for relative strength, beta calculations, and pairs trading.

**Applications:** Regime filtering, benchmark comparison, relative performance strategies.

## Fundamental Data

Access financial statement data and pre-calculated metrics:

**`balance_sheet`** - Assets, liabilities, debt, cash positions

**`income_statement`** - Revenue, margins, earnings, EPS

**`cash_flow`** - Operating cash flow, capex, free cash flow

**`financial_ratios`** - Valuation (P/E, P/B), profitability (ROE, ROA), liquidity ratios

**Applications:** Value screens, quality filters, multi-factor models, fundamental momentum.

## Economic Indicators

**`economic_indicator`** - Macro data including inflation, interest rates, employment, growth, and sentiment indicators.

**Key characteristics:** Sparse publication dates, variable frequency (daily to quarterly), requires connection to market data for date alignment.

**Applications:** Economic regime detection, macro filters, risk-on/risk-off signals.

## Institutional Activity

Track institutional and insider trading through regulatory filings:

**`form13f_holdings`** - Institutional ownership and position changes

**`insider_trading`** - Corporate insider buy/sell transactions

**Applications:** Smart money tracking, crowding detection, sentiment signals.

## Machine Learning

### Sentiment Analysis

**`finbert_sentiment`** - FinBERT sentiment analysis for financial text using AWS SageMaker. Analyzes financial news, earnings call transcripts, social media, and other text data.

**Returns:** Four columns
- `positive` - Boolean flag indicating positive sentiment
- `neutral` - Boolean flag indicating neutral sentiment
- `negative` - Boolean flag indicating negative sentiment
- `confidence` - Confidence score between 0.0 and 1.0

**Requirements:** AWS credentials configured, active SageMaker endpoint named "finbert" in us-west-2 region.

**Applications:** News sentiment filters, earnings call analysis, social media sentiment signals, narrative-driven alpha.

## Strategy Patterns

### Multi-Source Integration

**Technical + Fundamental** - Screen for quality fundamentals, time entries with price action

**Macro + Technical** - Filter by economic regime, execute on technical signals

**Institutional + Value** - Track smart money activity in undervalued names

**Cross-Sectional + Fundamental** - Rank universe by fundamental factors. For universe-wide ranking/selection, see [Cross-Sectional Analysis](./cross-sectional). Transforms marked with `isCrossSectional` flag operate across asset universe

### Frequency Alignment

Match data frequency to strategy timeframe:
- Daily/weekly: Fundamentals, economic data, institutional filings
- Intraday: OHLCV, VWAP, microstructure data

Be aware that different data types have varying publication delays.

### Forward Fill for Sparse Data

Fundamental and economic data publish infrequently (quarterly, monthly) while price data updates every bar. Use `ffill` transforms to forward-fill sparse data, propagating the last valid observation to fill gaps.

**Variants:**
- `ffill_number` - Forward fill numeric values (ratios, metrics)
- `ffill_string` - Forward fill string values (sector, category labels)
- `ffill_boolean` - Forward fill boolean flags

**Example: Daily market cap to equity ratio from quarterly filings**

```python
src = market_data_source(timeframe="1D")()
bs = balance_sheet(timeframe="1D", period="quarterly")()

# Total equity only updates quarterly - sparse with nulls between filings
equity_raw = bs.total_equity

# Forward fill to carry latest equity to every trading day
equity = ffill_number()(equity_raw)

# Daily price-to-equity using current price and most recent filing
price_to_equity = src.c / equity
```

**When to use ffill:**
- Quarterly fundamentals compared against daily/intraday prices
- Economic indicators with irregular publication dates
- Any sparse data source before cross-sectional ranking or calculations
- Filling gaps before technical indicators that require continuous data

**Note:** Leading nulls (before first valid value) remain null after ffill.

## See Also

- [Timeframes](/docs/concepts/timeframes) - Multi-timeframe strategies
- [Cross-Sectional](/docs/concepts/cross-sectional) - Factor strategies
- [Research](/docs/concepts/research) - Data exploration
